{"ast":null,"code":"import { createServer, Factory, Model, Response } from 'miragejs';\nimport faker from 'faker';\nexport function makeServer() {\n  var server = createServer({\n    models: {\n      user: Model.extend({})\n    },\n    factories: {\n      user: Factory.extend({\n        name: function name(i) {\n          return \"User\".concat(i + 1);\n        },\n        email: function email() {\n          return faker.internet.email().toLowerCase();\n        },\n        createdAt: function createdAt() {\n          return faker.date.recent(200);\n        }\n      })\n    },\n    seeds: function seeds(server) {\n      server.createList('user', 200);\n    },\n    routes: function routes() {\n      this.namespace = 'api';\n      this.timing = 750;\n      this.get('/users', function (schema, request) {\n        var _request$queryParams = request.queryParams,\n            _request$queryParams$ = _request$queryParams.page,\n            page = _request$queryParams$ === void 0 ? 1 : _request$queryParams$,\n            _request$queryParams$2 = _request$queryParams.per_page,\n            per_page = _request$queryParams$2 === void 0 ? 10 : _request$queryParams$2;\n        var total = schema.all('user').length;\n        var pageStart = (Number(page) - 1) * Number(per_page);\n        var pageEnd = pageStart + Number(per_page);\n        var users = this.serialize(schema.all('user')).users.slice(pageStart, pageEnd);\n        return new Response(200, {\n          'x-total-count': String(total)\n        }, {\n          users: users\n        });\n      });\n      this.post('/users');\n      this.namespace = '';\n      this.passthrough();\n    }\n  });\n  return server;\n}","map":{"version":3,"sources":["/home/luan/Documentos/ignitemodulo4/src/services/mirage/index.ts"],"names":["createServer","Factory","Model","Response","faker","makeServer","server","models","user","extend","factories","name","i","email","internet","toLowerCase","createdAt","date","recent","seeds","createList","routes","namespace","timing","get","schema","request","queryParams","page","per_page","total","all","length","pageStart","Number","pageEnd","users","serialize","slice","String","post","passthrough"],"mappings":"AAAA,SAASA,YAAT,EAAsBC,OAAtB,EAA8BC,KAA9B,EAAoCC,QAApC,QAAmD,UAAnD;AACA,OAAOC,KAAP,MAAkB,OAAlB;AAOA,OAAO,SAASC,UAAT,GAAsB;AACzB,MAAMC,MAAM,GAAGN,YAAY,CAAC;AACxBO,IAAAA,MAAM,EAAE;AACLC,MAAAA,IAAI,EAAEN,KAAK,CAACO,MAAN,CAA4B,EAA5B;AADD,KADgB;AAIxBC,IAAAA,SAAS,EAAE;AACPF,MAAAA,IAAI,EAACP,OAAO,CAACQ,MAAR,CAAe;AAChBE,QAAAA,IADgB,gBACXC,CADW,EACT;AACH,+BAAcA,CAAC,GAAC,CAAhB;AACH,SAHe;AAIhBC,QAAAA,KAJgB,mBAIT;AACH,iBAAOT,KAAK,CAACU,QAAN,CAAeD,KAAf,GAAuBE,WAAvB,EAAP;AAEH,SAPe;AAQhBC,QAAAA,SARgB,uBAQL;AACP,iBAAOZ,KAAK,CAACa,IAAN,CAAWC,MAAX,CAAkB,GAAlB,CAAP;AACH;AAVe,OAAf;AADE,KAJa;AAkBxBC,IAAAA,KAlBwB,iBAkBlBb,MAlBkB,EAkBV;AACVA,MAAAA,MAAM,CAACc,UAAP,CAAkB,MAAlB,EAAyB,GAAzB;AAEH,KArBuB;AAsBxBC,IAAAA,MAtBwB,oBAsBhB;AACJ,WAAKC,SAAL,GAAiB,KAAjB;AACA,WAAKC,MAAL,GAAc,GAAd;AAGA,WAAKC,GAAL,CAAS,QAAT,EAAkB,UAAUC,MAAV,EAAiBC,OAAjB,EAA0B;AAAA,mCACPA,OAAO,CAACC,WADD;AAAA,yDACjCC,IADiC;AAAA,YACjCA,IADiC,sCAC1B,CAD0B;AAAA,0DACxBC,QADwB;AAAA,YACxBA,QADwB,uCACb,EADa;AAGxC,YAAMC,KAAK,GAAGL,MAAM,CAACM,GAAP,CAAW,MAAX,EAAmBC,MAAjC;AAEA,YAAMC,SAAS,GAAG,CAACC,MAAM,CAACN,IAAD,CAAN,GAAe,CAAhB,IAAmBM,MAAM,CAACL,QAAD,CAA3C;AACA,YAAMM,OAAO,GAAGF,SAAS,GAAGC,MAAM,CAACL,QAAD,CAAlC;AAEA,YAAMO,KAAK,GAAG,KAAKC,SAAL,CAAeZ,MAAM,CAACM,GAAP,CAAW,MAAX,CAAf,EAAmCK,KAAnC,CAAyCE,KAAzC,CAA+CL,SAA/C,EAAyDE,OAAzD,CAAd;AAEA,eAAO,IAAIhC,QAAJ,CACH,GADG,EAEH;AAAC,2BAAgBoC,MAAM,CAACT,KAAD;AAAvB,SAFG,EAGH;AAAEM,UAAAA,KAAK,EAALA;AAAF,SAHG,CAAP;AAMH,OAhBD;AAkBA,WAAKI,IAAL,CAAU,QAAV;AAEA,WAAKlB,SAAL,GAAgB,EAAhB;AACA,WAAKmB,WAAL;AAEH;AAlDuB,GAAD,CAA3B;AAoDA,SAAOnC,MAAP;AACH","sourcesContent":["import { createServer,Factory,Model,Response} from 'miragejs';\nimport faker from 'faker';\ntype User = {\n    name:string;\n    email:string;\n    created_at:string;\n}\n\nexport function makeServer() {\n    const server = createServer({\n        models: {\n           user: Model.extend<Partial<User>>({}) \n        },\n        factories: { \n            user:Factory.extend({\n                name(i){\n                    return `User${i+1}`\n                },\n                email(){\n                    return faker.internet.email().toLowerCase();\n\n                },\n                createdAt(){\n                    return faker.date.recent(200);\n                }\n            })\n        },\n        seeds(server) {\n            server.createList('user',200)\n\n        },\n        routes(){\n            this.namespace = 'api';\n            this.timing = 750;\n\n\n            this.get('/users',function (schema,request) {\n                const {page = 1,per_page = 10} = request.queryParams\n\n                const total = schema.all('user').length\n\n                const pageStart = (Number(page) - 1)*Number(per_page);\n                const pageEnd = pageStart + Number(per_page);\n\n                const users = this.serialize(schema.all('user')).users.slice(pageStart,pageEnd)\n\n                return new Response (\n                    200, \n                    {'x-total-count':String(total)},\n                    { users }\n\n                )\n            });\n\n            this.post('/users');\n\n            this.namespace= '';\n            this.passthrough();\n            \n        }\n    })\n    return server;\n}"]},"metadata":{},"sourceType":"module"}